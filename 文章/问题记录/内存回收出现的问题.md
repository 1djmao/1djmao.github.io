之前一直有用户反映照相时失败，在 bugly 也看到过很多静态变量空指针导致应用崩溃的情况，而这些情况在开发和测试时都没出现过也没有复现，只能在调用的时候做判空处理。通过在开发者选项中设置 “不保留活动” 模拟了 Activity 被销毁的情况，复现了问题。总的来说就是内存不足时会被频繁回收，所有内存中存储的数据都变的不可靠。

研究了一下数据保存和恢复的方法，可靠的主要两种方式。



#### 在 onSaveInstanceState 和 onRestoreInstanceState 中保存和恢复 Activity 数据

对于 Activity 内部数据，使用 onSaveInstanceState 来保存数据。虽然这种方式在每个将 Android 的书中都有讲，但一直没有引起重视，以后要用起来了。

上面说的照相失败的问题就是由于调用相机的 Activity 在跳转到相机界面时就被系统回收了，所以在照相机成功照相后返回这个界面的时候其存储的照片的路径信息已经丢失了，所以显示照相失败。

#### 在本地存储中保存全局静态变量

对于全局静态变量，在 ShardPreference 中做备份，当调用的时候判空，如果为空就从 ShardPreference 恢复。
